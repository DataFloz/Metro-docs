"use strict";(self.webpackChunkmetro_docs=self.webpackChunkmetro_docs||[]).push([[2688],{3905:(t,e,n)=>{n.d(e,{Zo:()=>u,kt:()=>d});var a=n(7294);function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(t,e){if(null==t)return{};var n,a,r=function(t,e){if(null==t)return{};var n,a,r={},o=Object.keys(t);for(a=0;a<o.length;a++)n=o[a],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(a=0;a<o.length;a++)n=o[a],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}var p=a.createContext({}),s=function(t){var e=a.useContext(p),n=e;return t&&(n="function"==typeof t?t(e):i(i({},e),t)),n},u=function(t){var e=s(t.components);return a.createElement(p.Provider,{value:e},t.children)},c="mdxType",m={inlineCode:"code",wrapper:function(t){var e=t.children;return a.createElement(a.Fragment,{},e)}},f=a.forwardRef((function(t,e){var n=t.components,r=t.mdxType,o=t.originalType,p=t.parentName,u=l(t,["components","mdxType","originalType","parentName"]),c=s(n),f=r,d=c["".concat(p,".").concat(f)]||c[f]||m[f]||o;return n?a.createElement(d,i(i({ref:e},u),{},{components:n})):a.createElement(d,i({ref:e},u))}));function d(t,e){var n=arguments,r=e&&e.mdxType;if("string"==typeof t||r){var o=n.length,i=new Array(o);i[0]=f;var l={};for(var p in e)hasOwnProperty.call(e,p)&&(l[p]=e[p]);l.originalType=t,l[c]="string"==typeof t?t:r,i[1]=l;for(var s=2;s<o;s++)i[s]=n[s];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}f.displayName="MDXCreateElement"},7260:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>p,contentTitle:()=>i,default:()=>m,frontMatter:()=>o,metadata:()=>l,toc:()=>s});var a=n(7462),r=(n(7294),n(3905));const o={sidebar_position:2},i="Config YAML",l={unversionedId:"explanation/config",id:"explanation/config",title:"Config YAML",description:"The Metro.yaml file, located at /runner/cfg/metro.yaml, is a central configuration file for the system. It contains all the necessary configuration settings for the system, including queue connections, pipeline definitions, transformers, and runtime configuration.",source:"@site/docs/explanation/config.md",sourceDirName:"explanation",slug:"/explanation/config",permalink:"/Metro-docs/docs/explanation/config",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/explanation/config.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"introSidebar",previous:{title:"Intro",permalink:"/Metro-docs/docs/explanation/intro"},next:{title:"Runner",permalink:"/Metro-docs/docs/explanation/runner"}},p={},s=[{value:"Infrastructure as Code (IAC) Approach",id:"infrastructure-as-code-iac-approach",level:2},{value:"Metro.yaml Examples",id:"metroyaml-examples",level:2},{value:"Schema Table",id:"schema-table",level:2}],u={toc:s},c="wrapper";function m(t){let{components:e,...n}=t;return(0,r.kt)(c,(0,a.Z)({},u,n,{components:e,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"config-yaml"},"Config YAML"),(0,r.kt)("h1",{id:"metroyaml-configuration"},"Metro.yaml Configuration"),(0,r.kt)("p",null,"The Metro.yaml file, located at ",(0,r.kt)("inlineCode",{parentName:"p"},"/runner/cfg/metro.yaml"),", is a central configuration file for the system. It contains all the necessary configuration settings for the system, including queue connections, pipeline definitions, transformers, and runtime configuration."),(0,r.kt)("h2",{id:"infrastructure-as-code-iac-approach"},"Infrastructure as Code (IAC) Approach"),(0,r.kt)("p",null,"The Metro.yaml configuration file embodies the Infrastructure as Code (IAC) approach. IAC is a methodology that treats infrastructure and configuration settings as code, enabling automation, version control, and reproducibility. Here are some benefits of using the IAC approach in the system:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Consistency and Reproducibility"),": With IAC, the system configuration is defined in code, allowing you to recreate the exact infrastructure and configuration across different environments consistently. This ensures reproducibility and reduces the risk of configuration drift.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Version Control"),": Treating the system configuration as code enables version control. You can track changes, revert to previous versions, and collaborate with others using established version control practices. This improves collaboration, transparency, and accountability.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Automation and Efficiency"),": IAC allows for automated provisioning and configuration management. You can automate the deployment and configuration processes, reducing manual errors, and improving efficiency. Changes can be easily applied, tested, and rolled back if necessary."))),(0,r.kt)("h2",{id:"metroyaml-examples"},"Metro.yaml Examples"),(0,r.kt)("p",null,"To help you get started with the Metro.yaml configuration file, here are a few examples of different configuration sections:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Queue Connection Configuration"),":",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},"  name: 'sample-config'\n  running_infrastructure:\n  infrustructure_type: container\n  connectors:\n  -\n      name: 'local-kafka-connector'\n      type: 'kafka'\n      brokers: 'kafka:29092'\n      group_id: 'some-group-id'\n  pipelines:\n  -\n      name: 'calculate-fullname'\n      input:\n      type: 'kafka'\n      topic: 'persons'\n      output:\n      type: 'kafka'\n      topic: 'persons-with-full-name'\n      transformation:\n      type: 'sql'\n      sql_query: 'SELECT *, first_name || \" \" || last_name as full_name FROM msg'\n  -\n      name: 'calculate-is-adult'\n      input:\n      type: 'kafka'\n      topic: 'persons-with-full-name'\n      output:\n      type: 'kafka'\n      topic: 'persons-with-full-name-is-adult'\n      transformation:\n      type: 'sql'\n      sql_query: 'SELECT *, age > 18 as is_adult FROM msg'\n  -\n      name: 'filter-only-abults'\n      input:\n      type: 'kafka'\n      topic: 'persons-with-full-name-is-adult'\n      output:\n      type: 'kafka'\n      topic: 'persons-only-adults'\n      transformation:\n      type: 'sql'\n      sql_query: 'SELECT * FROM msg WHERE is_adult'\n  -\n      name: 'predict-person-with-ML'\n      input:\n      type: 'kafka'\n      topic: 'persons-with-full-name'\n      output:\n      type: 'kafka'\n      topic: 'persons-with-ml'\n      transformation:\n      type: 'pickle'\n    file_name: 'test.pkl'\n")))),(0,r.kt)("p",null,"These examples provide a glimpse into the structure and syntax of the Metro.yaml configuration file. Refer to the system's documentation for detailed information on each configuration option and the available configuration settings."),(0,r.kt)("p",null,"Embrace the power of Infrastructure as Code with the Metro.yaml configuration file, enabling reproducibility, automation, and version control in your system configuration."),(0,r.kt)("p",null,"With this sample Markdown content, you can explain the purpose and benefits of the Metro.yaml configuration file, as well as provide a few examples to illustrate its structure and syntax. Feel free to customize and expand upon this content based on your specific system's configuration options and requirements."),(0,r.kt)("h2",{id:"schema-table"},"Schema Table"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"property name"),(0,r.kt)("th",{parentName:"tr",align:null},"description"),(0,r.kt)("th",{parentName:"tr",align:null},"type"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"name"),(0,r.kt)("td",{parentName:"tr",align:null},"the name of your metro deployment"),(0,r.kt)("td",{parentName:"tr",align:null},"string")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"running_infrastructure"),(0,r.kt)("td",{parentName:"tr",align:null},"contain the configuration for running the pipelines"),(0,r.kt)("td",{parentName:"tr",align:null},"running_infrastructure")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"connector"),(0,r.kt)("td",{parentName:"tr",align:null},"contain the configuration for the pipelines connector"),(0,r.kt)("td",{parentName:"tr",align:null},"connector")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"pipelines"),(0,r.kt)("td",{parentName:"tr",align:null},"contain the configuration for all the pipelines"),(0,r.kt)("td",{parentName:"tr",align:null},"pipeline array")))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"running_infrastructure"),":"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"property name"),(0,r.kt)("th",{parentName:"tr",align:null},"description"),(0,r.kt)("th",{parentName:"tr",align:null},"type"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"infrustructure_type"),(0,r.kt)("td",{parentName:"tr",align:null},"the type of the infrastructure to run"),(0,r.kt)("td",{parentName:"tr",align:null},"'container'/'kubernetes'")))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"connector"),":"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"property name"),(0,r.kt)("th",{parentName:"tr",align:null},"description"),(0,r.kt)("th",{parentName:"tr",align:null},"type"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"name"),(0,r.kt)("td",{parentName:"tr",align:null},"the name of the connector"),(0,r.kt)("td",{parentName:"tr",align:null},"string")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"type"),(0,r.kt)("td",{parentName:"tr",align:null},"the type of the connector (only kafka for now)"),(0,r.kt)("td",{parentName:"tr",align:null},"'kafka'")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"brokers"),(0,r.kt)("td",{parentName:"tr",align:null},"kafka brokers"),(0,r.kt)("td",{parentName:"tr",align:null},"string")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"group_id"),(0,r.kt)("td",{parentName:"tr",align:null},"consumer group id"),(0,r.kt)("td",{parentName:"tr",align:null},"string")))),(0,r.kt)("p",null,"More about the pipeline configuration is availble in the pipeline and transformers docs."))}m.isMDXComponent=!0}}]);